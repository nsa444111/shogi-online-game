<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>オンライン将棋ゲーム</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            padding: 20px;
            background-color: #f0f0f0;
        }
        
        h1 {
            color: #333;
            text-align: center;
            font-size: 24px;
            margin-bottom: 20px;
        }
        
        .button-container {
            text-align: center;
            margin: 20px 0;
        }
        
        button {
            padding: 15px 30px;
            margin: 10px;
            font-size: 18px;
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
        
        button:hover {
            background-color: #45a049;
        }
        
        #board {
            margin: 20px auto;
            padding: 20px;
            background-color: white;
            border: 2px solid #333;
            border-radius: 5px;
            text-align: center;
            max-width: 600px;
            font-size: 18px;
            min-height: 200px;
        }
        
        #status {
            margin: 20px auto;
            padding: 15px;
            background-color: #e8f4f8;
            border: 1px solid #4CAF50;
            border-radius: 5px;
            text-align: center;
            max-width: 600px;
            font-size: 18px;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <h1>オンライン将棋ゲーム</h1>
    
    <div class="button-container">
        <button onclick="createRoom()">部屋を作成</button>
        <button onclick="joinRoom()">部屋に参加</button>
    </div>
    
    <div id="board">将棋盤がここに表示されます</div>
    
    <div id="status">ゲーム状態</div>

    <script>
        // 即座にalertを表示
        alert('ページ読み込み完了');
        
        console.log('HTML読み込み開始');
        
        // HTMLの基本要素が存在するかチェック
        function checkElements() {
            console.log('要素チェック開始');
            
            const h1 = document.querySelector('h1');
            const board = document.getElementById('board');
            const status = document.getElementById('status');
            const buttons = document.querySelectorAll('button');
            
            console.log('h1要素:', h1 ? '存在' : '存在しない');
            console.log('board要素:', board ? '存在' : '存在しない');
            console.log('status要素:', status ? '存在' : '存在しない');
            console.log('button要素数:', buttons.length);
            
            if (board) {
                board.innerHTML = '<p style="color: green; font-size: 20px;">✓ 将棋盤要素が正常に読み込まれました</p>';
            }
            
            if (status) {
                status.innerHTML = '✓ ステータス要素が正常に動作しています';
            }
        }
        
        // 部屋作成
        function createRoom() {
            alert('部屋作成ボタンがクリックされました');
            console.log('部屋作成ボタンクリック');
            
            const board = document.getElementById('board');
            if (board) {
                board.innerHTML = '<p style="color: blue;">部屋作成機能をクリックしました</p>';
            }
        }
        
        // 部屋参加
        function joinRoom() {
            alert('部屋参加ボタンがクリックされました');
            console.log('部屋参加ボタンクリック');
            
            const board = document.getElementById('board');
            if (board) {
                board.innerHTML = '<p style="color: red;">部屋参加機能をクリックしました</p>';
            }
        }
        
        // 簡単な将棋盤を描画
        function drawSimpleBoard() {
            console.log('簡単な将棋盤描画開始');
            
            const board = document.getElementById('board');
            if (!board) {
                console.error('board要素が見つかりません');
                return;
            }
            
            let boardHTML = '<h3>将棋盤 (9x9)</h3>';
            boardHTML += '<table style="margin: 0 auto; border-collapse: collapse;">';
            
            for (let row = 0; row < 9; row++) {
                boardHTML += '<tr>';
                for (let col = 0; col < 9; col++) {
                    const cellStyle = 'border: 1px solid #333; width: 30px; height: 30px; text-align: center; background-color: #DEB887;';
                    boardHTML += `<td style="${cellStyle}" onclick="cellClick(${row}, ${col})">${row}-${col}</td>`;
                }
                boardHTML += '</tr>';
            }
            boardHTML += '</table>';
            
            board.innerHTML = boardHTML;
            console.log('将棋盤描画完了');
        }
        
        // セルクリック
        function cellClick(row, col) {
            alert(`セル (${row}, ${col}) がクリックされました`);
            console.log(`セルクリック: (${row}, ${col})`);
            
            const status = document.getElementById('status');
            if (status) {
                status.innerHTML = `セル (${row}, ${col}) がクリックされました`;
            }
        }
        
        // 初期化
        function initialize() {
            console.log('初期化開始');
            checkElements();
            drawSimpleBoard();
            console.log('初期化完了');
        }
        
        // DOM読み込み後に実行
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', initialize);
        } else {
            initialize();
        }
        
        // バックアップ（既に読み込まれている場合）
        setTimeout(function() {
            console.log('バックアップ初期化実行');
            initialize();
        }, 100);
        
        console.log('スクリプト読み込み完了');
    </script>
</body>
</html>